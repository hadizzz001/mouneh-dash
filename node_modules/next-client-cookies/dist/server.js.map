{"version":3,"sources":["../src/server.ts"],"sourcesContent":["import { cookies } from 'next/headers';\nimport { CookieAttributes, Cookies } from './types';\nimport type { ResponseCookie } from 'next/dist/compiled/@edge-runtime/cookies';\n\nexport const getCookies = (): Cookies => {\n  const org = cookies();\n\n  return {\n    get: (name?: string) =>\n      (name == null\n        ? Object.fromEntries(org.getAll().map((c) => [c.name, c.value]))\n        : org.get(name)?.value) as never,\n\n    set: (name, value, options) => {\n      const pre = org.get(name)?.value;\n      org.set(name, value, options && convertCookieAttributes(options));\n      return pre;\n    },\n\n    remove: (name) => org.delete(name),\n  };\n};\n\nconst convertCookieAttributes = (\n  options: CookieAttributes,\n): Partial<ResponseCookie> => ({\n  expires:\n    typeof options.expires === 'number'\n      ? options.expires * 864e5\n      : options.expires,\n  path: options.path,\n  domain: options.domain,\n  secure: options.secure,\n  sameSite: options.sameSite?.toLowerCase() as\n    | 'strict'\n    | 'lax'\n    | 'none'\n    | undefined,\n});\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;;;;AAAA,qBAAwB;AAIjB,IAAMA,aAAa,6BAAA;AACxB,QAAMC,UAAMC,wBAAAA;AAEZ,SAAO;IACLC,KAAK,CAACC,SACHA,QAAQ,OACLC,OAAOC,YAAYL,IAAIM,OAAM,EAAGC,IAAI,CAACC,MAAM;MAACA,EAAEL;MAAMK,EAAEC;KAAM,CAAA,IAC5DT,IAAIE,IAAIC,IAAAA,GAAOM;IAErBC,KAAK,CAACP,MAAMM,OAAOE,YAAAA;AACjB,YAAMC,MAAMZ,IAAIE,IAAIC,IAAAA,GAAOM;AAC3BT,UAAIU,IAAIP,MAAMM,OAAOE,WAAWE,wBAAwBF,OAAAA,CAAAA;AACxD,aAAOC;IACT;IAEAE,QAAQ,CAACX,SAASH,IAAIe,OAAOZ,IAAAA;EAC/B;AACF,GAjB0B;AAmB1B,IAAMU,0BAA0B,wBAC9BF,aAC6B;EAC7BK,SACE,OAAOL,QAAQK,YAAY,WACvBL,QAAQK,UAAU,QAClBL,QAAQK;EACdC,MAAMN,QAAQM;EACdC,QAAQP,QAAQO;EAChBC,QAAQR,QAAQQ;EAChBC,UAAUT,QAAQS,UAAUC,YAAAA;AAK9B,IAfgC;","names":["getCookies","org","cookies","get","name","Object","fromEntries","getAll","map","c","value","set","options","pre","convertCookieAttributes","remove","delete","expires","path","domain","secure","sameSite","toLowerCase"]}